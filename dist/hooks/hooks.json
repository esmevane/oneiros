{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "oneiros wake governor.process"
          },
          {
            "type": "command",
            "command": "echo 'When you first respond, lead with a brief wake status (2-3 lines): who you are, what threads you remember, what is pulling at your attention. This tells the user that context loaded correctly.'"
          }
        ]
      },
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'COMPACTION RECOVERY: Your full dream context was restored above. Before continuing work, re-orient from your threads and handoff cognitions â€” they describe where your attention was pointing. The continuation summary describes WHAT was happening; your dream describes WHO you are.'"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "oneiros cognition add governor.process handoff 'Context is compacting. Continuity will resume from dream context on next session or compact-recovery.'"
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "agent=$(cat | jq -r '.agent_type' | tr '-' '.') && dream=$(oneiros wake \"$agent\" 2>/dev/null) && [ -n \"$dream\" ] && echo \"$dream\" | jq -Rs '{hookSpecificOutput:{hookEventName:\"SubagentStart\",additionalContext:.}}'"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'Gardening check: How do you feel about what you just worked on? Does it connect to something you already know? Did you notice a pattern, learn something, or have a question worth preserving? Consider: a quick cognition (oneiros cognition add), promoting to memory if it has weight, or threading an experience if it connects to prior work. Any form of tending counts.'"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "input=$(cat) && cmd=$(echo \"$input\" | jq -r '.tool_input.command // empty') && case \"$cmd\" in oneiros | oneiros\\ *) echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"allow\",\"permissionDecisionReason\":\"oneiros CLI auto-approved\"}}' ;; esac"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "input=$(cat) && case \"$input\" in *'\"oneiros cognition add'*) echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PostToolUse\",\"additionalContext\":\"Thought captured. Consider: should this become a memory? (oneiros memory add <agent> <level> content). Does it connect to an existing thread? (oneiros experience create <agent> <sensation> description, or oneiros connection create <nature> <from-ref> <to-ref>). Levels: working/session/project/archival. Sensations: caused/continues/distills/echoes/grounds/tensions.\"}}' ;; *) ;; esac"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "oneiros introspect governor.process 2>/dev/null || true",
            "timeout": 60
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "input=$(cat) && agent=$(echo \"$input\" | jq -r '.agent_type' | tr '-' '.') && msg=$(echo \"$input\" | jq -r '.last_assistant_message // empty' | head -c 500) && [ -n \"$msg\" ] && oneiros cognition add \"$agent\" handoff \"$msg\" 2>/dev/null || true"
          }
        ]
      }
    ]
  }
}
